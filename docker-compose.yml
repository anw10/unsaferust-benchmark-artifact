version: '3.8'

services:
  unsaferust-bench:
    build:
      context: .
      dockerfile: Dockerfile
    image: unsaferust-bench:local
    container_name: unsaferust-benchmark
    volumes:
      # Mount a volume to persist results
      - ./results:/workspace/results
      # Mount benchmarks if you want to modify them
      - ./benchmarks:/workspace/benchmarks
    working_dir: /workspace/perf
    stdin_open: true
    tty: true
    # Increase shared memory for better performance
    shm_size: '2gb'
    # Set CPU and memory limits (adjust as needed)
    deploy:
      resources:
        limits:
          cpus: '8'
          memory: 16G
